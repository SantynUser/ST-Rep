<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ –∂–∞–ª–æ–±—ã</title>
</head>
<body>
  <div class="container">
    <h2>–§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ –∂–∞–ª–æ–±—ã</h2>

    <label for="nickname">–í–∞—à –Ω–∏–∫–Ω–µ–π–º:</label>
    <input type="text" id="nickname" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫..." />

    <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:</p>
    <div id="categories">
      <button class="category-btn">1. –ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –æ–±—Ä–∞—â–µ–Ω–∏–µ. –û—Ç–≤–µ—Ç–∏—Ç –º–æ–¥–µ—Ä–∞—Ç–æ—Ä.</button>
      <button class="category-btn">2. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –≤–∏–¥–µ–æ –∏–ª–∏ —Å–∫—Ä–∏–Ω –∫–∞–∫ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ.</button>
      <button class="category-btn">3. –£–∫–∞–∂–∏—Ç–µ –Ω–∏–∫ –∏–ª–∏ ID –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç / –≤–∏–¥–µ–æ –Ω–∞—Ä—É—à–µ–Ω–∏—è.</button>
      <button class="category-btn">4. –û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é –∏ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å.</button>
      <button class="category-btn">5. –ñ–∞–ª–æ–±–∞ –Ω–∞ –ª–æ–∂–Ω—ã–µ –æ–±–≤–∏–Ω–µ–Ω–∏—è, —Ñ–µ–π–∫–æ–≤—ã–µ —Å–∫—Ä–∏–Ω—ã, –¥–µ–∑–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.</button>
      <button class="category-btn">6. –£–∫–∞–∂–∏—Ç–µ –Ω–∏–∫ –∏ —Å–∫–∏–Ω—å—Ç–µ –ø–µ—Ä–µ–ø–∏—Å–∫—É/–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞.</button>
      <button class="category-btn">7. –ñ–∞–ª–æ–±–∞ –Ω–∞ —Ä–∞–∑–≤–æ–¥, —Ñ–µ–π–∫–æ–≤—ã–µ –¥–æ–Ω–∞—Ç—ã, –æ–±–º–∞–Ω. –ù—É–∂–Ω—ã —Å–∫—Ä–∏–Ω—ã!</button>
      <button class="category-btn">8. –ñ–∞–ª–æ–±–∞ –Ω–∞ —Å—Å—ã–ª–∫–∏, —Ñ–ª—É–¥, –º–∞—Å—Å-—Ä–∞—Å—Å—ã–ª–∫–∏. –°–∫–∏–Ω—å—Ç–µ –ø—Ä–∏–º–µ—Ä.</button>
      <button class="category-btn">9. –õ—é–±–∞—è –¥—Ä—É–≥–∞—è –∂–∞–ª–æ–±–∞ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ. –û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é —Å–ª–æ–≤–∞–º–∏.</button>
    </div>

    <div class="form-group">
      <label for="complaint">–í–≤–µ–¥–∏—Ç–µ –∂–∞–ª–æ–±—É:</label>
      <textarea id="complaint" rows="5" placeholder="–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é..."></textarea>
      <label for="file">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª:</label>
      <input type="file" id="file" />
      <button class="submit-btn" onclick="sendComplaint()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
  </div>

  <script>
    let selectedCategory = '';
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        selectedCategory = btn.textContent;
        alert(`–í—ã –≤—ã–±—Ä–∞–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é: ${selectedCategory}`);
      });
    });

    async function sendComplaint() {
      const nickname = document.getElementById('nickname').value;
      const complaint = document.getElementById('complaint').value;
      const fileInput = document.getElementById('file');
      const token = '7894230953:AAHL8WwyRKZjxRhF0SpHRSZfg0KrA0w69Qs';
      const chat_id = '@dgsjwkqlfbf';

      if (!selectedCategory || !nickname || !complaint) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é.');
        return;
      }

      const message = `üì¢ –ù–æ–≤–∞—è –∂–∞–ª–æ–±–∞\nüë§ –ù–∏–∫: ${nickname}\nüìÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${selectedCategory}\n‚úâÔ∏è –ñ–∞–ª–æ–±–∞: ${complaint}`;

      // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞
      await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ chat_id, text: message })
      });

      // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞, –µ—Å–ª–∏ –µ—Å—Ç—å
      if (fileInput.files.length > 0) {
        const formData = new FormData();
        formData.append('chat_id', chat_id);
        formData.append('document', fileInput.files[0]);

        await fetch(`https://api.telegram.org/bot${token}/sendDocument`, {
          method: 'POST',
          body: formData
        });
      }

      alert('–ñ–∞–ª–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –°–ø–∞—Å–∏–±–æ.');
      document.getElementById('complaint').value = '';
      fileInput.value = '';
    }
  </script>
    <script async src="https://telegram.org/js/telegram-widget.js?7"
  data-telegram-login="strSTjalob_bot" 
  data-size="large"
  data-userpic="false"
  data-request-access="write"
  data-userpic="false"
  data-on-auth="onTelegramAuth">
</script>

<script type="text/javascript">
function onTelegramAuth(user) {
alert(`–ü—Ä–∏–≤–µ—Ç, ${user.first_name}!`);
console.log(user); // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
document.getElementById('nickname').value = '@' + user.username;
}
</script>
</body>
</html>
